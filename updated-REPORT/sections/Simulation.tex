\section[Simulation]{Simulation\footnote{Stephan}}
These simulation was carried out to answer important design questions before the real implementation phase. After the decision for some suitable hardware, the idea was also to create artificial RFID reader data to test and simulate the algorithm, which will be explained in chapter \ref{Sec_Imp}. \\
To answer the design questions, the simulation got these parameter (chapter \ref{Sec_AppA} Line 1-50):\\
- the size of the simulation space\\
- distance between the tags\\
- distance between the first/last row/column of tags and the boarder of the simulation space\\
- diameter of the robot\\
- position of the antenna related to the origin of the robot\\
- the relation between RSSI and the distance antenna and tag\\
- initial start position and orientation\\
- difference between the measurement points of the initialization procedure\\
- optional: cycle time and speed of the robot (for another procedure)\\
- logging parameter (look of the logged text file)\\
\\
Foregone test leads to a distance between the tags of 10 cm. This was founded on the fact that in this case at least 4 tags are detected at the same time (maximum reading range of 14 cm). In this case are around 121 tags need for every square meter, which turned out to be realistic number for a small plant size. \\

\subsection{Emulator}
To create artificial RFID reader data, the emulator was able to write all found tags in the created environment together with information about the measuring point into a text file. During the initialization procedure, which was the main focus in this project, the robot turns around 360$^\circ$ and makes measurements every 45$^\circ$. \\
The emulator computed at each measurement point the distance of the antenna to the neighbouring tags. If a tags was closer than the maximal reading distance the emulator wrote the detected ID of the tags together with its RSSI into the text file. \\
The RSSI is an integer value from 0...7. 0 defines in this case a distance from 14 to around 10 cm from the antenna to the tag. In the first version of the emulator the RSSI was on the basis of the information from a paper {\color{red}reference paper?!?!} and mentioned a consistent increasing of the RSSI while the distance bewetten the tags and the antenna gets smaller. \\
During own measurements has been found out that this relation was inconsistent with this setup of components. Therefore the second version of the emulator was updated and creates more realistic data.\\

\subsection{RSSI Measurements with real hardware}
The relation of the RSSI is not just related to the distance between the antenna and the tag. It also depends on the orientation of the plain of both components. The tests with the real hardware was performed in a setup where the tags was placed on a floor and the antenna was parallel to the floor at a hight of 1.5 cm. The reason for this was the fact that the antenna should be placed directly under the robot. Fig. \ref{RSSI_Dis} presents the results of the measurements.

\begin{figure}[!htbp]
\centering
\includegraphics[width = 16cm]{pictures/RSSI_Distance}
\caption{Relation between RSSI and distance antenna to tag}
\label{RSSI_Dis}
\end{figure}
The correct values are also given in tbl. \ref{RSSI_Dis_data}:\\
\begin{table}[!htbp]
\centering
\begin{tabular}{|c|l|l|l|l|l|l|l|l|l|l}
\hline
\begin{tabular}[c]{@{}c@{}}Antenna to\\  tag[cm]\end{tabular} & \multicolumn{1}{c|}{14}  & \multicolumn{1}{c|}{9.8} & \multicolumn{1}{c|}{9}   & \multicolumn{1}{c|}{8}   & \multicolumn{1}{c|}{7}   & \multicolumn{1}{c|}{6}   & \multicolumn{1}{c|}{5.8} & \multicolumn{1}{c|}{5.5} & \multicolumn{1}{c|}{5.3} & \multicolumn{1}{c|}{5.1} \\ \hline
RSSI                                                          & \multicolumn{1}{c|}{0/0} & \multicolumn{1}{c|}{1/1} & \multicolumn{1}{c|}{2/2} & \multicolumn{1}{c|}{3/3} & \multicolumn{1}{c|}{4/4} & \multicolumn{1}{c|}{5/5} & \multicolumn{1}{c|}{4/4} & \multicolumn{1}{c|}{3/3} & \multicolumn{1}{c|}{2/2} & \multicolumn{1}{c|}{1/1} \\ \hline
\begin{tabular}[c]{@{}c@{}}Antenna\\ to tag[cm]\end{tabular}  & 5                        & 4.7                      & 4.5                      & 4.3                      & 4.2                      & 4                        & 3.5                      & 2.8                      & 0                        &                          \\ \cline{1-10}
RSSI                                                          & 0/0                      & 1/1                      & 2/2                      & 3/3                      & 4/4                      & 5/5                      & 6/6                      & 7/7                      & 7/7                      &                          \\ \cline{1-10}
\end{tabular}
\label{RSSI_Dis_data}
\caption{Relation between RSSI and distance antenna to tag (data)}
\end{table}\\
It can be seen that there exists a blind spot at a distance of 5 cm where the RSSI drops to 0. The consequence is now that it is not trivial to build up a relation from the RSSI back to the correct distance. \\

\subsection{Simulation with emulated data}
The idea of the final implementation is to estimate the initial position and orientation of the robot. A first version of an algorithm to solve this problem was created in matlab. The first part of these algorithm was the emulator which simulated the 360$^\circ$ turn and recorded the tag information. The second part was the solver which is also explained deeper in the chapter \ref{Sec_Imp}. \\
The first version of the solver which estimates the initial position and orientation based on the consistent RSSI data was quickly build up. After observing an inconsistent behaviour of the RSSI the simulation as well as the solver were updated.\\

\subsection{Results}
The application of the emulated data on the solver indicates the following results: \\
\begin{table}[!htbp]
\centering
\begin{tabular}{|c|c|c|}
\hline
                               & \begin{tabular}[c]{@{}c@{}}Avg. accuracy position \\  (x-, \& y-direction) {[}mm{]}\end{tabular} & \begin{tabular}[c]{@{}c@{}}Avg. Accuracy \\  orientation [$^\circ$] \end{tabular} \\ \hline
Data mentioned in paper        & 2                                                                                                  & \textless{}1                                                                    \\ \hline
Own recorded data (blind spot) & 10                                                                                                 & 20                                                                              \\ \hline
\end{tabular}
\caption{Results Simulation}
\label{Res_Sim}
\end{table}\\
As can be seen from tbl. \ref{Res_Sim}, there is a very good match between the estimated position and orientation of the robot for the consistent RSSI data. On the other hand results the inconsistent RSSI data in significant differences in the estimation of the position and orientation of the robot.\\
The reason for this is the higher complexity of the algorithm to first estimate the correct distances related to RSSI values and then start to estimate the position based on those distances. \\
A small error in the estimation of the position of the first antenna leads also to a big error in the computed orientation of the robot.

 